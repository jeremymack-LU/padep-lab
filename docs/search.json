[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "PM2.5 vs.Â Wind Speed",
    "section": "",
    "text": "Import PA DEP datasets:\n\n# Install and load required packages\ninstall.packages('pacman')\npacman::p_load(segmented,tidyverse)\n\n# Download wind and PM2.5 data\nurl1 <- 'https://www.dropbox.com/s/djsrnlou8gfd9h6/pa_dep_wind.csv?dl=1'\nurl2 <- 'https://www.dropbox.com/s/f60llaltcclen47/pa_dep_pm25.csv?dl=1'\n\nwind <- read_csv(url1)\npm25 <- read_csv(url2)\n\n\n# View the wind dataset in a spreadsheet-style view\nView(wind)\n     \n# Check the structure of the wind dataset\nstr(wind)\n\n# Quick summary of the wind dataset\nsummary(wind)\n\n\n# Subset data and create a date variable\nwind.avg <- wind %>%\n  select(Day,Avg,Month) %>%\n  mutate(Year=str_sub(Month,-4),\n         Month=str_sub(Month,1,nchar(Month)-5),\n         Date=as.Date(paste(Year,Month,Day,sep='-'))) %>%\n  arrange(Date) %>%\n  rename(avg_wind=Avg) %>%\n  select(Date,avg_wind)\n\npm25.avg <- pm25 %>%\n  select(Day,Avg,Month) %>%\n  mutate(Year=str_sub(Month,-4),\n         Month=str_sub(Month,1,nchar(Month)-5),\n         Date=as.Date(paste(Year,Month,Day,sep='-'))) %>%\n  arrange(Date) %>%\n  rename(avg_pm25=Avg) %>% \n  select(Date,avg_pm25)\n\n# Join wind and PM2.5 datasets together\ndep.data <- pm25.avg %>%\n  left_join(wind.avg, by='Date')\n\nsummary(dep.data)\n\n      Date               avg_pm25         avg_wind    \n Min.   :2012-08-03   Min.   : -1.60   Min.   : 0.00  \n 1st Qu.:2015-02-10   1st Qu.:  6.20   1st Qu.: 1.90  \n Median :2017-09-02   Median :  9.10   Median : 3.10  \n Mean   :2017-08-30   Mean   : 10.62   Mean   : 3.66  \n 3rd Qu.:2020-02-19   3rd Qu.: 13.20   3rd Qu.: 4.80  \n Max.   :2022-09-24   Max.   :166.60   Max.   :31.20  \n                      NA's   :2        NA's   :70     \n\n\n\n\n\nVisualize the data:\n\n# Plot relationship between wind and PM2.5\ndep.data %>%\n  ggplot(aes(avg_wind,avg_pm25)) + geom_point()\n\n\n\n# Transform data\ndep.data <- dep.data %>%\n  mutate(Tavg_pm25=log(avg_pm25),\n         Tavg_wind=log(avg_wind+0.01))\n\n# Plot relationship between wind and PM2.5 after transforming data\ndep.data %>%\n  ggplot(aes(Tavg_wind,Tavg_pm25)) + geom_point()\n\n\n\n\n\n\n\nLinear model fit:\n\n# Fit a linear model to the data\nlm.fit   <- lm(Tavg_pm25~Tavg_wind,data=dep.data)\n\n# Extract fitted values from segment analysis\nlm.fit.df   <- fitted(lm.fit)\n\n# Create dataset with wind and fitted PM2.5 data\nlm.model.df <- data.frame(Tavg_wind=dep.data$Tavg_wind,\n                          fit_pm25=lm.fit.df)\n\n# Plot relationship between wind and PM2.5 after transforming data\n# and add the linear model fit\ndep.data %>%\n  ggplot(aes(Tavg_wind,Tavg_pm25)) +\n  geom_point(size=0.25,alpha=0.5) +\n  geom_line(data=lm.model.df,\n            aes(x=Tavg_wind, y=fit_pm25),\n            size=0.5) +\n  theme_minimal() +\n  labs(x='Avg. wind (log-transformed)',\n       y='Avg. PM 2.5 (log-transformed)')\n\n\n\n\n\n\n\nSegmented model fit:\n\n# Break point analysis\nseg.fit  <- segmented(lm.fit)\n\n# Extract fitted values from segment analysis\nseg.fit.df   <- fitted(seg.fit)\n\n# Create dataset with wind and fitted PM2.5 data\nseg.model.df <- data.frame(Tavg_wind=dep.data$Tavg_wind,\n                           fit_pm25=seg.fit.df)\n\n# Plot relationship between wind and PM2.5 after transforming data\n# and add the segmented model fit\ndep.data %>%\n  ggplot(aes(Tavg_wind,Tavg_pm25)) +\n  geom_point(size=0.25,alpha=0.5) +\n  geom_line(data=seg.model.df,\n            aes(x=Tavg_wind, y=fit_pm25),\n            size=0.5) +\n  theme_minimal() +\n  labs(x='Avg. wind (log-transformed)',\n       y='Avg. PM 2.5 (log-transformed)')"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "The following site contains script that summarizes the relationship between wind speed and PM2.5. Data were collected by PA DEP at their Freemansburg site and can be accessed here."
  }
]